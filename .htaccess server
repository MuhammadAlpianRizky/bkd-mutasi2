<IfModule mod_rewrite.c>
    RewriteEngine On

    # Redirect trailing slashes
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteRule ^(.*)/$ /$1 [L,R=301]

    # Send all requests to index.php unless it's a valid file or directory
    RewriteCond %{REQUEST_URI} !(\.css|\.js|\.png|\.jpg|\.gif|robots\.txt)$ [NC]
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteRule ^ index.php [L]

    # Serve CSS, JS, and images from the public folder
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_URI} !^/public/
    RewriteRule ^(css|js|images)/(.*)$ public/$1/$2 [L,NC]

    # Restrict access to /storage
    RewriteRule ^storage/ - [F,L]  # Deny access to everyone
</IfModule>

# Allow access to /storage for authenticated users with certain roles
# You can handle this in your Laravel routes or middleware
